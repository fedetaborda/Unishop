const mercadopago = require('./index');

mercadopago.configure({
  access_token: 'TEST-545545474996086-010315-04b0f100ed5aeb57304e2926cebde76a__LB_LC__-239656545'
});


var payment = {
  description: 'Buying a PS4',
  transaction_amount: 10500,
  payment_method_id: 'rapipago',
  payer: {
    email: 'test_user_16905384@testuser.com',
    identification: {
      type: 'DNI',
      number: '34123123'
    }
  }
};

/*
mercadopago.payment.create(payment).then(function (mpResponse) {
  console.log(mpResponse);
}).catch(function (mpError) {
  return mercadopago.payment.create(payment, {
    qs: {
      idempotency: mpError.idempotency
    }
  });
}).then(function(mpResponse){
  console.log(mpResponse);
});
*/

mercadopago.ipn.getPayment('14292275').then(res => {
  console.log(res)
}).catch(e => {
  console.log(e)
})
